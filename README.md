# Discord 鮭魚轉生 Bot

> **「鮭魚轉生，再抽一次。」**

## 📜 背景介紹

這是一個專為 Discord 社群打造的娛樂型遊戲機器人，結合「陽壽抽獎」、「鮭魚幣經濟系統」、「轉生 RPG」、「道具卡」等多種機制，透過趣味的互動設計強化伺服器活躍度。

你可以在伺服器中：

* **講話、開直播、通話來賺取鮭魚幣**
* **用鮭魚幣兌換陽壽，進行各種抽獎**
* **使用迴轉卡保命，避免血虧**
* **升級、排名、解鎖稱號，變身最強鮭魚王者**

系統設計強調趣味、可擴展與資料持久性，包含完整的每日刷新邏輯、運氣加成、保底機制與獨立玩家記錄管理。

---

## 📦 安裝方式

### 1. 安裝相依套件

```bash
pip install discord.py spotipy yt-dlp pymupdf pytz
```

### 2. 建立必要檔案

本 Bot 會使用以下 JSON 檔案來儲存資料，請於專案資料夾內建立以下空白檔案：

```
user.json
afk.json
item.json
lottery.json
history.json
date.json
shop.json
product.json
rpg_data.json
recipe.json
job.json
sign_in.json
xtal_lottery.json
```

也可以先手動建立預設內容（若你需要初始化 JSON 的內容樣板，我也可以幫你）

### 3. 啟動機器人

```bash
python bot_2.py
```

---

## ⚙️ 使用教學（Slash 指令簡介）

| 指令名稱     | 功能說明                       |
| -------- | -------------------------- |
| `/用戶資訊`  | 檢查自己的鮭魚幣、陽壽、升級狀況           |
| `/抗性`    | 根據攻擊力等條件計算怪物抗性             |
| `/物理防禦`  | 反推怪物的物理防禦值                 |
| `/兌換陽壽`  | 將鮭魚幣轉換為陽壽（1 陽壽 = 3500 鮭魚幣） |
| `/抽獎`    | 使用陽壽抽獎（含一般獎池、道具卡十連、王石抽）    |
| `/歷史紀錄`  | 查看近 100 次抽獎結果              |
| `/排行`    | 根據累積鮭魚幣排名                  |
| `/空氣排行`  | 抽中「空氣」最多次的倒霉鬼排名            |
| `/增加金幣`  | 管理員指令，對玩家加幣                |
| `/迴轉卡設定` | 是否啟用「自動迴轉卡保護」機制            |

---

## 🧠 核心機制說明

### 🎰 抽獎系統

* 使用「陽壽」作為抽獎成本
* 三種獎池：普通／一般／大獎
* 有保底（抽超過指定次數未出大獎，機率會逐漸上升）
* 獎品包含「鮭魚幣」、「書」、「王石」與「空氣」

### 💰 鮭魚幣經濟系統

* 講話／語音通話／開直播皆可獲得鮭魚幣（每日上限）
* 鮭魚幣可用於兌換陽壽、購買道具等
* 可統計伺服器內累積取得金幣最多的玩家

### 🎴 道具卡與迴轉機制

* 玩家可透過十連抽獲得各式卡片
* 卡片包含：「指定暱稱卡」、「身分組卡」、「迴轉卡」...
* 當玩家抽到不良結果時，若啟用迴轉卡，可自動消耗保命！

### 📅 每日刷新系統

* 每日凌晨會自動刷新：

  * 玩家每日限額歸零
  * 商店每日推薦商品更換
  * 道具商品過期刪除
  * 進行王石機率更新（每週更新加倍道具）

---

## 💾 資料結構（JSON）

| 檔案名稱                | 用途說明                    |
| ------------------- | ----------------------- |
| `user.json`         | 紀錄使用者 ID、鮭魚幣、陽壽、語音統計等資料 |
| `item.json`         | 儲存每位使用者擁有的道具卡種類與數量      |
| `lottery.json`      | 記錄抽獎次數、保底計算等狀態          |
| `history.json`      | 每位使用者的抽獎歷史記錄（最多 100 筆）  |
| `xtal_lottery.json` | 王石獎池內容與加倍狀態紀錄           |

其他檔案：如 `recipe.json`、`job.json`、`rpg_data.json` 用於 RPG 系統資料管理

---

## 🛠️ 開發與維護

本專案使用：

* `discord.py` 建立 Slash Command 與互動界面
* `yt_dlp` 處理 YouTube 音訊串流（可擴展）
* `spotipy` 整合 Spotify 搜尋與播放（可選）
* `pytz` 與 `datetime` 做每日更新與排程
* `json` 本地存檔，不使用資料庫

---

## 🙋‍♂️ 特別感謝

此機器人最初用於私人 Discord 伺服器，為了提升伺服器活躍度、增加社群趣味互動而開發。

設計理念融合了轉生、養成、抽卡、貨幣經濟與彩蛋邏輯，靈感來自遊戲與社群文化。

> 「陽壽有限，抽起來才刺激。」
